<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Planner</title>
</head>
<body>
    <h1>Study Planner & Deadline Tracker</h1>

    <!-- Filter Buttons -->
    <h2>Filter Tasks</h2>
    <a href="/" {{^filter}}style="font-weight: bold;"{{/filter}}>Show All</a> |
    <a href="/?filter=pending" {{#pendingFilter}}style="font-weight: bold;"{{/pendingFilter}}>Show Pending</a> |
    <a href="/?filter=completed" {{#completedFilter}}style="font-weight: bold;"{{/completedFilter}}>Show Completed</a>

    <!-- Sorting Buttons -->
    <h2>Sort Tasks</h2>
    <a href="/?sort=due_date{{#filter}}&filter={{filter}}{{/filter}}" {{#sort_due_date}}style="font-weight: bold;"{{/sort_due_date}}>Sort by Due Date</a> |
    <a href="/?sort=priority{{#filter}}&filter={{filter}}{{/filter}}" {{#sort_priority}}style="font-weight: bold;"{{/sort_priority}}>Sort by Priority</a>

    <!-- Task Form -->
    <h2>Add a New Task</h2>
    <form action="/add" method="POST">
        <label>Title:</label>
        <input type="text" name="title" required><br>

        <label>Course Name:</label>
        <input type="text" name="course_name" required><br>

        <label>Due Date:</label>
        <input type="date" name="due_date" required><br>

        <label>Priority (1-5):</label>
        <input type="number" name="priority" min="1" max="5" required><br>

        <button type="submit">Add Task</button>
    </form>

    <!-- Task List -->
    <h2>Task List</h2>
    {{#tasks}}
        <div>
            <strong>{{title}}</strong> - {{course_name}} (Due: {{due_date}}, Priority: {{priority}}, Status: {{status}})
            
            <!-- Mark as Completed Button (Only for Pending Tasks) -->
            {{#pending}}
            <form action="/complete/{{id}}" method="POST" style="display:inline;">
                <button type="submit">Mark as Completed</button>
            </form>
            {{/pending}}

            <!-- Delete Button -->
            <form action="/delete/{{id}}" method="POST" style="display:inline;">
                <button type="submit">Delete</button>
            </form>
        </div>
    {{/tasks}}

</body>
</html>
